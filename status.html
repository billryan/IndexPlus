<!DOCTYPE HTML>
<!--
COPYRIGHT (c) Xidian Open Source Community < xdl@xdlinux.info >
Author:
  - Shanzi <ant_sz@xdlinux.info>
  - Justin Wong <bigeagle@xdlinux.info>

This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with this program. If not, see http://www.gnu.org/licenses/.
-->
<html>
  <head>
    <title>Mirror Status | xdlinux</title>
    <link rel="stylesheet" type="text/css" href="style.css" /> 
  </head>
  <body>
    <header class='header'>
    <img src="img/logo.png" alt="logo" />
    <p>A brief dashboard showing xdlinux mirror syncronizing status.</p>
    </header>
    <div class="panel">
      <dl>
        <dd id='content'>
        <div class='flip-container sample'>
          <div class='flip'>
            <div class="front">
              <img src="img/ubuntu.png"  />
            </div>
            <div class="back">
            </div>
          </div>
        </div>
        </dd>
        <dd>
        <a href="http://groups.xdlinux.info/" ><img src="img/mail.png" alt="Mail List" /></a>
        <a href="http://t.xdlinux.info/" ><img src="img/twitter.png" alt="Twitter" /></a>
        <a href="http://xdlinux.info/bbs/" ><img src="img/bbs.png" alt="BBS" /></a>
        <a href="ftp://linux.xidian.edu.cn/" ><img src="img/ftp.png" alt="FTP" /></a>
        </dd>
        <dd>When discovered something new, we put an eye on it.
        <br>When discovered something cool, we spread it.
        <br>All we know, all we have, all we like, we'd like to share with you! </dd>
        <dd id="notice">
        Mozzilla Firefox 4.0+ , Chrome 7+(with GPU render enabled), Safari 5.0+ are recommended to view this page.
        </dd>
      </dl>
      <div class="right">E<span>njoy</span> I<span>t</span></div>
    </div>
    <footer class='footer'>
    <dl>
      <dt>
      <strong>Open Source For Everyone</strong>
      </dt>
      <dd>
      <p>					We believe that Open Source make lives better, not only for programer but also for everyone who need to work with computer.</p>
      <p>					Explore our site to know who we are, what we do and why we do that.</p>
      <p>					Know more about Open Source, please refer to <a href="http://en.wikipedia.org/wiki/Open_source#Computer_software"><strong>Wikipedia</strong></a></p>
      </dd>

    </dl>
    </footer>
    <script type="text/javascript" charset="utf-8" src='js/jquery.min.js'>
    </script>
    <script type="text/javascript" charset="utf-8">
      $(document).ready(function(){
        $.ajax({
          url: "/m_status.json",
          method: 'GET',
          dataType: 'json',
          success: onDataReceived
        });
        function onDataReceived(ss){ 
          $.each(ss,function(i,t){
            if( t.status == "0")
            {
              stat="<span style='color:#0056ff;'>Success!</span>";
              s_class="";
            }
            else if ( t.status == "-1" ){
              stat="<span style='color:#ffe700;'>Syncing</span>";
              s_class="syncing";
            }
            else 
            {
              stat="<span style='color:#fffc00;'><b>FAIL!</b></span>";
              s_class="fail";
            }
            var node=$('.sample').clone().removeClass('sample');
            node.addClass(s_class);
            node.find('img').attr('src','img/'+t.icon);
            node.find('.back').append("<br/><a class='repo' href='http://ftp.xdlinux.info/"+i+"' >"+i+"</a> "
              +"<div class='status'><ul>"
              +"<li> <b>Status</b>:&nbsp;&nbsp;"+ stat +"&nbsp;&nbsp;<a class='log'"
              +"href='"+t.log+"'>"+i+".log</a> </li>"
              +"<li> <b>Upstream</b>:&nbsp;&nbsp;"+ t.upstream +" </li>"
              +"<li> <b>LastSync</b>:&nbsp;&nbsp;"+ t.lastsync +" </li>"
            +"</ul></div>");
            $('#content').append(node);
          });
          $('.flip').hover(function(){
            $(this).children(".back").css({
              "left":$(this).offset().left,
              "top":$(this).offset().top,
              "opacity":1
            }); 
          },function(){
            $(this).children(".back").css({
              "left":-9000,
              "top":-9000,
              "opacity":0
            }); 
          });
        }

      });
    </script>
  </body>
</html>
